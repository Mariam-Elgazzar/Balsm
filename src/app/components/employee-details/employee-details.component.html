<div
  class="employee-details-overlay"
  *ngIf="employee"
  (click)="onOverlayClick($event)"
>
  <div class="employee-details-card">
    <div class="card-header">
      <div class="employee-avatar">
        {{ employee.name.charAt(0) || "" }}
      </div>
      <h3 class="card-title">تفاصيل الموظف</h3>
      <button class="close-btn" (click)="closeDetails()">
        <span class="material-icons">close</span>
      </button>
    </div>

    <div class="card-body">
      <div class="info-grid">
        <div class="info-group">
          <div class="info-label">
            <span class="material-icons">person</span>
            الاسم
          </div>
          <div class="info-value">{{ employee.name || "غير متوفر" }}</div>
        </div>

        <div class="info-group">
          <div class="info-label">
            <span class="material-icons">email</span>
            البريد الإلكتروني
          </div>
          <div class="info-value">{{ employee.email || "غير متوفر" }}</div>
        </div>

        <div class="info-group">
          <div class="info-label">
            <span class="material-icons">payments</span>
            الراتب
          </div>
          <div class="info-value highlight">{{ employee.salary }} ريال</div>
        </div>

        <div class="info-group">
          <div class="info-label">
            <span class="material-icons">phone</span>
            رقم الهاتف
          </div>
          <div class="info-value">
            {{ employee.phoneNumber || "غير متوفر" }}
          </div>
        </div>

        <div class="info-group">
          <div class="info-label">
            <span class="material-icons">location_on</span>
            العنوان
          </div>
          <div class="info-value">{{ employee.address || "غير متوفر" }}</div>
        </div>

        <div class="info-group">
          <div class="info-label">
            <span class="material-icons">badge</span>
            الرقم الوطني
          </div>
          <div class="info-value">{{ employee.nationalId || "غير متوفر" }}</div>
        </div>

        <div class="info-group">
          <div class="info-label">
            <span class="material-icons">location_on</span>
            موقع العمل
          </div>
          <div class="info-value">{{ employee.branch.name }}</div>
        </div>

        <div class="info-group">
          <div class="info-label">
            <span class="material-icons">wc</span>
            الجنس
          </div>
          <div class="info-value">
            {{
              employee.gender
                ? employee.gender === "Female"
                  ? "أنثى"
                  : "ذكر"
                : "غير متوفر"
            }}
          </div>
        </div>

        <div class="info-group">
          <div class="info-label">
            <span class="material-icons">event</span>
            تاريخ بدء العمل
          </div>
          <div class="info-value">{{ employee.hiringDate }}</div>
        </div>

        <div class="info-group">
          <div class="info-label">
            <span class="material-icons">cake</span>
            تاريخ الميلاد
          </div>
          <div class="info-value">
            {{ employee.dateOfBarth || "غير متوفر" }}
          </div>
        </div>

        <div class="info-group">
          <div class="info-label">
            <span class="material-icons">admin_panel_settings</span>
            الأدوار
          </div>
          <div class="info-value">
            {{ employee.roles.join(", ") || "غير متوفر" }}
          </div>
        </div>
      </div>
    </div>

    <div class="card-footer">
      <button class="action-btn edit-btn" (click)="editEmployee()">
        <span class="material-icons">edit</span>
        تعديل
      </button>
      <button class="action-btn close-btn" (click)="closeDetails()">
        <span class="material-icons">close</span>
        إغلاق
      </button>
    </div>
  </div>
</div>

<ng-template #loadingOrError>
  <div class="loading-error" *ngIf="errorMessage; else loading">
    <p>{{ errorMessage }}</p>
    <button class="back-btn" (click)="closeDetails()">رجوع</button>
  </div>
  <ng-template #loading>
    <div class="loading">
      <p>جاري تحميل تفاصيل الموظف...</p>
    </div>
  </ng-template>
</ng-template>
